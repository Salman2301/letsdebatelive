<script lang="ts">
	import { clear, type ToastItemI } from './Toast.svelte';

	interface Props {
		data: ToastItemI;
	}

	let { data }: Props = $props();
</script>

<div class="container type-{data.type}">
	<div class="loader"></div>
	<div class="content">
		<div class="icon-container">
			{#if data.type === 'success'}
				<svg
					width="31"
					height="31"
					viewBox="0 0 31 31"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path
						fill-rule="evenodd"
						clip-rule="evenodd"
						d="M16 3C8.8203 3 3 8.8203 3 16C3 23.1797 8.8203 29 16 29C23.1797 29 29 23.1797 29 16C29 8.8203 23.1797 3 16 3ZM22.5409 12.6922C22.868 12.3106 22.8238 11.7362 22.4422 11.4091C22.0606 11.082 21.4861 11.1262 21.1591 11.5078L13.9986 19.8617L11.4435 17.3065C11.0881 16.9512 10.5119 16.9512 10.1565 17.3065C9.80116 17.6619 9.80116 18.2381 10.1565 18.5935L13.4065 21.8435C13.5858 22.0227 13.8316 22.1191 14.0849 22.1093C14.3382 22.0996 14.576 21.9847 14.7409 21.7922L22.5409 12.6922Z"
						fill="currentcolor"
					/>
				</svg>
			{:else if data.type === 'warn'}
				<svg
					width="31"
					height="31"
					viewBox="0 0 31 31"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path
						d="M28 16C28 19.4478 26.6304 22.7544 24.1924 25.1924C21.7544 27.6304 18.4478 29 15 29C11.5522 29 8.24558 27.6304 5.80761 25.1924C3.36964 22.7544 2 19.4478 2 16C2 12.5522 3.36964 9.24558 5.80761 6.80761C8.24558 4.36964 11.5522 3 15 3C18.4478 3 21.7544 4.36964 24.1924 6.80761C26.6304 9.24558 28 12.5522 28 16ZM15 9.5C14.7946 9.50012 14.5915 9.54325 14.4038 9.62663C14.2161 9.71001 14.048 9.83178 13.9102 9.98411C13.7724 10.1364 13.6681 10.3159 13.6039 10.511C13.5397 10.7061 13.5171 10.9125 13.5375 11.1169L14.1062 16.8157C14.1254 17.0396 14.2278 17.2482 14.3933 17.4002C14.5588 17.5521 14.7753 17.6365 15 17.6365C15.2247 17.6365 15.4412 17.5521 15.6067 17.4002C15.7722 17.2482 15.8746 17.0396 15.8937 16.8157L16.4625 11.1169C16.4829 10.9125 16.4603 10.7061 16.3961 10.511C16.3319 10.3159 16.2276 10.1364 16.0898 9.98411C15.952 9.83178 15.7839 9.71001 15.5962 9.62663C15.4085 9.54325 15.2054 9.50012 15 9.5ZM15.0032 19.25C14.5723 19.25 14.1589 19.4212 13.8542 19.726C13.5495 20.0307 13.3782 20.444 13.3782 20.875C13.3782 21.306 13.5495 21.7193 13.8542 22.024C14.1589 22.3288 14.5723 22.5 15.0032 22.5C15.4342 22.5 15.8476 22.3288 16.1523 22.024C16.457 21.7193 16.6282 21.306 16.6282 20.875C16.6282 20.444 16.457 20.0307 16.1523 19.726C15.8476 19.4212 15.4342 19.25 15.0032 19.25Z"
						fill="currentcolor"
					/>
				</svg>
			{:else if data.type === 'error'}
				<svg
					width="31"
					height="31"
					viewBox="0 0 31 31"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path
						fill-rule="evenodd"
						clip-rule="evenodd"
						d="M16 3C8.8203 3 3 8.8203 3 16C3 23.1797 8.8203 29 16 29C23.1797 29 29 23.1797 29 16C29 8.8203 23.1797 3 16 3ZM20.7146 10.8675C20.81 10.9071 20.8967 10.9651 20.9696 11.0382C21.2694 11.338 21.2694 11.8429 20.9696 12.1426L17.1123 16L20.9696 19.8574C21.0427 19.9304 21.1006 20.0171 21.1401 20.1125C21.1797 20.208 21.2 20.3102 21.2 20.4135C21.2 20.5168 21.1797 20.6191 21.1401 20.7145C21.1006 20.8099 21.0427 20.8966 20.9696 20.9696C20.8966 21.0427 20.8099 21.1006 20.7145 21.1401C20.6191 21.1797 20.5168 21.2 20.4135 21.2C20.3102 21.2 20.208 21.1797 20.1125 21.1401C20.0171 21.1006 19.9304 21.0427 19.8574 20.9696L16 17.1123L12.1426 20.9696C12.0696 21.0427 11.9829 21.1006 11.8875 21.1401C11.792 21.1797 11.6898 21.2 11.5865 21.2C11.4832 21.2 11.3809 21.1797 11.2855 21.1401C11.1901 21.1006 11.1034 21.0427 11.0304 20.9696C10.9573 20.8966 10.8994 20.8099 10.8599 20.7145C10.8203 20.6191 10.8 20.5168 10.8 20.4135C10.8 20.3102 10.8203 20.208 10.8599 20.1125C10.8994 20.0171 10.9573 19.9304 11.0304 19.8574L14.8877 16L11.0304 12.1426C10.9573 12.0696 10.8994 11.9829 10.8599 11.8875C10.8203 11.792 10.8 11.6898 10.8 11.5865C10.8 11.4832 10.8203 11.3809 10.8599 11.2855C10.8994 11.1901 10.9573 11.1034 11.0304 11.0304C11.1034 10.9573 11.1901 10.8994 11.2855 10.8599C11.3809 10.8203 11.4832 10.8 11.5865 10.8C11.6898 10.8 11.792 10.8203 11.8875 10.8599C11.9829 10.8994 12.0696 10.9573 12.1426 11.0304L16 14.8877L19.8574 11.0382C19.9304 10.9651 20.0171 10.9071 20.1125 10.8675C20.2079 10.8279 20.3102 10.8076 20.4135 10.8076C20.5168 10.8076 20.6191 10.8279 20.7146 10.8675Z"
						fill="currentcolor"
					/>
				</svg>
			{:else if data.type === 'info'}
				<svg
					width="31"
					height="31"
					viewBox="0 0 31 31"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path
						d="M16 3C13.4288 3 10.9154 3.76244 8.77759 5.19089C6.63975 6.61935 4.97351 8.64967 3.98957 11.0251C3.00563 13.4006 2.74819 16.0144 3.2498 18.5362C3.7514 21.0579 4.98953 23.3743 6.80762 25.1924C8.6257 27.0105 10.9421 28.2486 13.4638 28.7502C15.9856 29.2518 18.5994 28.9944 20.9749 28.0104C23.3503 27.0265 25.3806 25.3602 26.8091 23.2224C28.2376 21.0846 29 18.5712 29 16C28.9964 12.5533 27.6256 9.24881 25.1884 6.81163C22.7512 4.37445 19.4467 3.00364 16 3ZM15.5 9C15.7967 9 16.0867 9.08797 16.3334 9.25279C16.58 9.41762 16.7723 9.65188 16.8858 9.92597C16.9994 10.2001 17.0291 10.5017 16.9712 10.7926C16.9133 11.0836 16.7704 11.3509 16.5607 11.5607C16.3509 11.7704 16.0836 11.9133 15.7926 11.9712C15.5017 12.0291 15.2001 11.9993 14.926 11.8858C14.6519 11.7723 14.4176 11.58 14.2528 11.3334C14.088 11.0867 14 10.7967 14 10.5C14 10.1022 14.158 9.72064 14.4393 9.43934C14.7206 9.15803 15.1022 9 15.5 9ZM17 23C16.4696 23 15.9609 22.7893 15.5858 22.4142C15.2107 22.0391 15 21.5304 15 21V16C14.7348 16 14.4804 15.8946 14.2929 15.7071C14.1054 15.5196 14 15.2652 14 15C14 14.7348 14.1054 14.4804 14.2929 14.2929C14.4804 14.1054 14.7348 14 15 14C15.5304 14 16.0391 14.2107 16.4142 14.5858C16.7893 14.9609 17 15.4696 17 16V21C17.2652 21 17.5196 21.1054 17.7071 21.2929C17.8946 21.4804 18 21.7348 18 22C18 22.2652 17.8946 22.5196 17.7071 22.7071C17.5196 22.8946 17.2652 23 17 23Z"
						fill="currentcolor"
					/>
				</svg>
			{/if}
		</div>
		<span>{data.message}</span>
	</div>
	<button class="btn-close" onclick={()=>clear(data.id as string)}>
		<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path
				d="M22.5 7.5L7.5 22.5"
				stroke="white"
				stroke-width="1.4"
				stroke-linecap="round"
				stroke-linejoin="round"
			/>
			<path
				d="M7.5 7.5L22.5 22.5"
				stroke="white"
				stroke-width="1.4"
				stroke-linecap="round"
				stroke-linejoin="round"
			/>
		</svg>
	</button>
</div>

<style lang="postcss">
	.container {
		width: 100%;
		max-width: 440px;
		padding: 10px;

		display: flex;
		justify-content: space-around;
		align-items: start;

		border: 1px solid var(--color-light-gray);
		@apply bg-primary-dark;
		border-radius: 4px;
		margin-bottom: 10px;

		--color-success: rgba(133, 255, 133, 0.8);
		--color-error: rgba(255, 56, 56, 0.8);
		--color-warn: rgba(255, 242, 95, 0.8);
		--color-info: rgba(107, 107, 107, 0.8);

		overflow: hidden;
		position: relative;
	}
	.loader {
		width: 0%;
		position: absolute;
		height: 4px;
		top: 0px;
		background-color: rgba(255, 255, 255, 0.8);
		animation: load 14.4s linear;
		left: 0;
	}

	.type-success .loader {
		background-color: var(--color-success);
	}
	.type-error .loader {
		background-color: var(--color-error);
	}
	.type-warn .loader {
		background-color: var(--color-warn);
	}
	.type-info .loader {
		background-color: var(--color-info);
	}

	@keyframes load {
		0% {
			width: 0%;
		}
		100% {
			width: 100%;
		}
	}
	.content {
		@apply flex gap-1 w-full;
	}
	.content span {
		margin-top: 4px;
		font-size: 14px;
	}

	.btn-close {
		width: 30px;
		height: 30px;
	}

	.type-success .content .icon-container svg path {
		color: var(--color-success);
	}
	.type-error .content .icon-container svg path {
		color: var(--color-error);
	}
	.type-warn .content .icon-container svg path {
		color: var(--color-warn);
	}
	.type-info .content .icon-container svg path {
		color: var(--color-info);
	}
</style>
